
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;python&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="python">python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#models" class="toc-h2 toc-link" data-title="Models">Models</a>
                  </li>
                  <li>
                    <a href="#content-type" class="toc-h2 toc-link" data-title="Content type">Content type</a>
                  </li>
                  <li>
                    <a href="#volume-and-latency" class="toc-h2 toc-link" data-title="Volume and latency">Volume and latency</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#authorization" class="toc-h1 toc-link" data-title="Authorization">Authorization</a>
          </li>
          <li>
            <a href="#scoring-urls" class="toc-h1 toc-link" data-title="Scoring URLs">Scoring URLs</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#submitting-url-for-scoring" class="toc-h2 toc-link" data-title="Submitting URL for scoring">Submitting URL for scoring</a>
                  </li>
                  <li>
                    <a href="#fetching-the-scores" class="toc-h2 toc-link" data-title="Fetching the scores">Fetching the scores</a>
                  </li>
                  <li>
                    <a href="#submit-an-url-for-scoring" class="toc-h2 toc-link" data-title="Submit an URL for scoring">Submit an URL for scoring</a>
                  </li>
                  <li>
                    <a href="#fetch-the-scores-of-a-url" class="toc-h2 toc-link" data-title="Fetch the scores of a URL">Fetch the scores of a URL</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#scoring-domains" class="toc-h1 toc-link" data-title="Scoring domains">Scoring domains</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#1-submitting-domains-for-scoring" class="toc-h2 toc-link" data-title="1. Submitting domains for scoring">1. Submitting domains for scoring</a>
                  </li>
                  <li>
                    <a href="#2-fetching-the-scores" class="toc-h2 toc-link" data-title="2. Fetching the scores">2. Fetching the scores</a>
                  </li>
                  <li>
                    <a href="#submit-domains-for-scoring" class="toc-h2 toc-link" data-title="Submit domains for scoring">Submit domains for scoring</a>
                  </li>
                  <li>
                    <a href="#fetch-the-scores-for-domains" class="toc-h2 toc-link" data-title="Fetch the scores for domains">Fetch the scores for domains</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#intelligence" class="toc-h1 toc-link" data-title="Intelligence">Intelligence</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#authentication" class="toc-h2 toc-link" data-title="Authentication">Authentication</a>
                  </li>
                  <li>
                    <a href="#pagination" class="toc-h2 toc-link" data-title="Pagination">Pagination</a>
                  </li>
                  <li>
                    <a href="#query-params" class="toc-h2 toc-link" data-title="Query params">Query params</a>
                  </li>
                  <li>
                    <a href="#common-errors" class="toc-h2 toc-link" data-title="Common errors">Common errors</a>
                  </li>
                  <li>
                    <a href="#definitions" class="toc-h2 toc-link" data-title="Definitions">Definitions</a>
                  </li>
                  <li>
                    <a href="#intelligence-metrics" class="toc-h2 toc-link" data-title="Intelligence Metrics">Intelligence Metrics</a>
                  </li>
                  <li>
                    <a href="#metrics-definition" class="toc-h2 toc-link" data-title="Metrics definition">Metrics definition</a>
                  </li>
                  <li>
                    <a href="#metrics-type-and-range" class="toc-h2 toc-link" data-title="Metrics type and range">Metrics type and range</a>
                  </li>
                  <li>
                    <a href="#metrics-by-factmata-s-product-proposition" class="toc-h2 toc-link" data-title="Metrics by Factmata’s product proposition">Metrics by Factmata’s product proposition</a>
                  </li>
                  <li>
                    <a href="#metrics-for-brands-proposition-by-text-39-s-domain-type" class="toc-h2 toc-link" data-title="Metrics for Brands proposition by text's domain type">Metrics for Brands proposition by text's domain type</a>
                  </li>
                  <li>
                    <a href="#metrics-by-entity-type" class="toc-h2 toc-link" data-title="Metrics by entity type">Metrics by entity type</a>
                  </li>
                  <li>
                    <a href="#api-endpoints" class="toc-h2 toc-link" data-title="API endpoints">API endpoints</a>
                  </li>
                  <li>
                    <a href="#reports" class="toc-h2 toc-link" data-title="Reports">Reports</a>
                  </li>
                  <li>
                    <a href="#list-reports" class="toc-h2 toc-link" data-title="List reports">List reports</a>
                  </li>
                  <li>
                    <a href="#detail-reports" class="toc-h2 toc-link" data-title="Detail reports">Detail reports</a>
                  </li>
                  <li>
                    <a href="#report-version" class="toc-h2 toc-link" data-title="Report version">Report version</a>
                  </li>
                  <li>
                    <a href="#list-versions" class="toc-h2 toc-link" data-title="List versions">List versions</a>
                  </li>
                  <li>
                    <a href="#copy-version" class="toc-h2 toc-link" data-title="Copy version">Copy version</a>
                  </li>
                  <li>
                    <a href="#update-report-version" class="toc-h2 toc-link" data-title="Update report version">Update report version</a>
                  </li>
                  <li>
                    <a href="#topics" class="toc-h2 toc-link" data-title="Topics">Topics</a>
                  </li>
                  <li>
                    <a href="#list-topics" class="toc-h2 toc-link" data-title="List topics">List topics</a>
                  </li>
                  <li>
                    <a href="#detail-topics" class="toc-h2 toc-link" data-title="Detail topics">Detail topics</a>
                  </li>
                  <li>
                    <a href="#themes" class="toc-h2 toc-link" data-title="Themes">Themes</a>
                  </li>
                  <li>
                    <a href="#list-topic-themes" class="toc-h2 toc-link" data-title="List topic themes">List topic themes</a>
                  </li>
                  <li>
                    <a href="#detail-themes" class="toc-h2 toc-link" data-title="Detail themes">Detail themes</a>
                  </li>
                  <li>
                    <a href="#narratives" class="toc-h2 toc-link" data-title="Narratives">Narratives</a>
                  </li>
                  <li>
                    <a href="#list-narratives" class="toc-h2 toc-link" data-title="List narratives">List narratives</a>
                  </li>
                  <li>
                    <a href="#detail-narratives" class="toc-h2 toc-link" data-title="Detail narratives">Detail narratives</a>
                  </li>
                  <li>
                    <a href="#opinions" class="toc-h2 toc-link" data-title="Opinions">Opinions</a>
                  </li>
                  <li>
                    <a href="#list-narrative-opinions" class="toc-h2 toc-link" data-title="List narrative opinions">List narrative opinions</a>
                  </li>
                  <li>
                    <a href="#detail-opinions" class="toc-h2 toc-link" data-title="Detail opinions">Detail opinions</a>
                  </li>
                  <li>
                    <a href="#opinions-makers" class="toc-h2 toc-link" data-title="Opinions makers">Opinions makers</a>
                  </li>
                  <li>
                    <a href="#list-opinion-makers" class="toc-h2 toc-link" data-title="List opinion makers">List opinion makers</a>
                  </li>
                  <li>
                    <a href="#detail-opinion-markers" class="toc-h2 toc-link" data-title="Detail opinion markers">Detail opinion markers</a>
                  </li>
                  <li>
                    <a href="#comparisons" class="toc-h2 toc-link" data-title="Comparisons">Comparisons</a>
                  </li>
                  <li>
                    <a href="#list-comparisons" class="toc-h2 toc-link" data-title="List comparisons">List comparisons</a>
                  </li>
                  <li>
                    <a href="#detail-comparisons" class="toc-h2 toc-link" data-title="Detail comparisons">Detail comparisons</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='#'>Sign Up for a Developer Key</a></li>
            <li><a href='https://github.com/lord/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the Factmata Moderation API!</p>

<p>The API provides access to Factmata&#39;s Moderation - a risk scoring system. The system helps publishers and brands ensure they associate with safe inventory, and UGC platforms and publisher networks to flag more suspicious content for trust and safety teams. It enables avoiding unwanted ad placements, fines, user complaints, reputation damage and more. </p>

<p>The system provides provides a risk score based on a number of fine-grained models.</p>
<h2 id='models'>Models</h2>
<table><thead>
<tr>
<th>Id</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>8</td>
<td>Political Bias</td>
<td>Detects strongly biased political language</td>
</tr>
<tr>
<td>7</td>
<td>Hate speech</td>
<td>Detects demeaning and abusive language based on people&#39;s group identity</td>
</tr>
<tr>
<td>14</td>
<td>Sexism</td>
<td>Detects demeaning and abusive language based on people&#39;s gender identity</td>
</tr>
<tr>
<td>11</td>
<td>Racism</td>
<td>Detects demeaning and abusive language targeted towards a particular ethnicity</td>
</tr>
<tr>
<td>20</td>
<td>Toxicity</td>
<td>Detects language which insults, threatens, attacks any individual or group with the purpose of humiliating, degrading or excluding that person or group</td>
</tr>
<tr>
<td>22</td>
<td>Obscenity</td>
<td>Detects obscene and profane language</td>
</tr>
<tr>
<td>17</td>
<td>Insult</td>
<td>Detects scornful remarks directed towards an individual</td>
</tr>
<tr>
<td>18</td>
<td>Threat</td>
<td>Detects a wish or intention for pain, injury, or violence against an individual or group</td>
</tr>
<tr>
<td>10</td>
<td>Clickbait</td>
<td>Detects headlines which at the expense of being informative, are designed to entice readers into clicking the accompanying link</td>
</tr>
</tbody></table>

<p>Submitted content is scored by each of the models. The API does not allow to score content on just a selection of the available models.</p>

<p>Model&#39;s scores range from 0.00 to 1.00 and represent model&#39;s confidence. The higher the score the bigger probability of the content being risky. The scores are not directly comparable between the individual models, i.e. 0.75 for hate speech does&#39;t have the same significance as 0.75 for clickbait. </p>

<p>Besides providing a score per each of the models, the API also returns a combined risk score. The score represents an overall risk level of the scored content and consists of a weighted average of all the individual scores.</p>
<h2 id='content-type'>Content type</h2>
<p>The system scores any type of textual content on the Internet: articles, blog posts, forum comments, etc. It works for text only and exclusively for English-language content (see the section &#39;Coming next&#39; for other languages). </p>

<p>The API enables:
- scoring URLs: provides risk score for an individual URL, e.g. https://www.bbc.co.uk/news/92170379
- scoring domains: provides risk score for an entire domain, e.g. https://www.bbc.co.uk</p>
<h2 id='volume-and-latency'>Volume and latency</h2>
<p>The API can support up to 20,000 URLs a day. 
One URL takes between 5 seconds and 1.5 minute to be scored. The time depends on whether the text scraped from the URL is already in our DB or resuires scraping, which take 20-60 seconds. </p>
<h1 id='authorization'>Authorization</h1>
<p>Factmata API is authorized using API Key. If you don&#39;t have a key please contact info@factmata.com to get one set up.</p>

<p>The API_KEY is accepted as a request header <code>x-api-key</code>.</p>

<p>Do not share you API Key in publicly accessible platforms.</p>
<h1 id='scoring-urls'>Scoring URLs</h1>
<p>Scoring URLs using Factmata API works in two steps:</p>
<h2 id='submitting-url-for-scoring'>Submitting URL for scoring</h2>
<p>First, a URL needs to be submitted so the content can be scraped. The URL is scored by all the models in the Moderation pipeline once the content has been scraped.</p>
<h2 id='fetching-the-scores'>Fetching the scores</h2>
<p>After the URL has been submitted, the results will be available in some time.</p>

<p>URL Scoring is completed when the text has been scored by all the models.</p>

<p>During the time between submission and fetching, URL might already have 
    been scored by some models, while some are still being processed. In such case,
    the user has the option to fetch partial scores.</p>
<h2 id='submit-an-url-for-scoring'>Submit an URL for scoring</h2>
<p>To score a URL, it first needs to be submitted.</p>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.factmata.com/api/v0.1/score/url"</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'url'</span><span class="p">:</span> <span class="s">'www.example.com/some-page'</span>
<span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'x-api-key'</span><span class="p">:</span> <span class="n">API_KEY</span>
<span class="p">}</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.factmata.com/api/v0.1/score/url?url=https://example.com/page'</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"x-api-key: API_KEY"</span> 
</code></pre>
<blockquote>
<p>When the URL is successfully submitted for processing, the following response is returned.</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">STATUS</span><span class="p">:</span><span class="w"> </span><span class="mi">202</span><span class="w">
</span></code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="s2">"answer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Request Sent Successfully"</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>If the URL is already being processed, the following response is returned.</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">STATUS</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="w">
</span></code></pre><pre class="highlight plaintext"><code>{ "answer": "URL is being processed" }
</code></pre><h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://api.factmata.com/api/v0.1/score/url/?url=www.example.com/some-page</code></p>
<h3 id='request-payload'>Request Payload</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>url</td>
<td>A valid URL string. This parameter is <code>required</code>. In case the URL is malformed or absent, request is aborted with status <code>422</code>. If the URL has already been submitted for scoring, status <code>200</code> is returned.</td>
</tr>
</tbody></table>

<aside class="notice">
URL once submitted once, does not need to be submitted again.
</aside>

<aside class="notice">
Currently only English web-pages are scored.
</aside>

<aside class="warning">
URL must contain a path along with the domain/subdomain name. 
</aside>
<h2 id='fetch-the-scores-of-a-url'>Fetch the scores of a URL</h2>
<p>After a URL has been submitted for scoring, you can fetch the scores
using this API.</p>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.factmata.com/api/v0.1/score/url/"</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'url'</span><span class="p">:</span> <span class="s">'www.example.com/some-page'</span>
<span class="p">}</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'x-api-key'</span><span class="p">:</span> <span class="n">API_KEY</span>
<span class="p">}</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.factmata.com/api/v0.1/score/url?url=https://example.com/page'</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"x-api-key: API_KEY"</span> 
</code></pre>
<blockquote>
<p>If the URL has finished processing, the JSON structured like this is returned:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"model_names_scores"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"model"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
      </span><span class="s2">"model_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hate"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.314</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"model"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
      </span><span class="s2">"model_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hype"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.315</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"model"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="s2">"model_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bait"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.316</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"model"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w">
      </span><span class="s2">"model_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"racism"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.317</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"model"</span><span class="p">:</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span><span class="w">
      </span><span class="s2">"model_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sexism"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.317</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"model"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
      </span><span class="s2">"model_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"insult"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.318</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"model"</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w">
      </span><span class="s2">"model_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"threat"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.319</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"model"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
      </span><span class="s2">"model_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"toxic"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.320</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"model"</span><span class="p">:</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="w">
      </span><span class="s2">"model_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"obscene"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.320</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"combined_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.320</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>If <code>partial_results</code> flag is set and the URL is still processing, the following response is returned</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"model_names_scores"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"model_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hate"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.314</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="err">##</span><span class="w"> </span><span class="err">At</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">stage</span><span class="w"> </span><span class="err">only</span><span class="w"> </span><span class="err">model_name</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">has</span><span class="w"> </span><span class="err">finished</span><span class="w"> </span><span class="err">processing</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>If the <code>partial_results</code> flag is not set and the URL is still processing, the following response is returned </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">STATUS</span><span class="p">:</span><span class="w"> </span><span class="mi">202</span><span class="w">
</span></code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"answer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Please try again later"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET https://api.factmata.com/api/v0.1/score/url/?url=www.example.com/some-page&amp;partial_results=False</code></p>

<p>Fetching the scores has the following use cases:</p>
<h3 id='url-is-fully-processed'>URL is fully processed</h3>
<p>When the URL is fully processed, all the model_name scores, as well as the <code>combined score</code> are returned.</p>
<h3 id='url-is-partially-processed-partial_results-is-true'>URL is partially processed, <code>partial_results</code> is True</h3>
<p>The case when GET request is made, but only some model_names have finished scoring the URL, the user can fetch the scores of the <code>finished</code> model_names using the <code>partial_results</code> query parameter.
When <code>partial_results</code> is set to <code>True</code>, scores from model_names that have finished processing are returned.</p>
<h3 id='url-is-partially-processed-partial_results-is-false'>URL is partially processed, <code>partial_results</code> is False</h3>
<p>In this case, no scores are returned, and the API returns status code <code>202</code></p>
<h3 id='url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>url</td>
<td>None</td>
<td>A valid URL string. This parameter is <code>required</code>. In case the URL is malformed or absent, request is aborted with status <code>422</code>. If the URL has already been submitted for scoring, status <code>200</code> is returned.</td>
</tr>
<tr>
<td>partial_results</td>
<td>False</td>
<td>Optional Boolean flag if partial results are wanted</td>
</tr>
</tbody></table>
<h1 id='scoring-domains'>Scoring domains</h1>
<p>Scoring domains using Factmata API works in two steps:</p>
<h2 id='1-submitting-domains-for-scoring'>1. Submitting domains for scoring</h2>
<p>Before domains can be scored, they need to be crawled, and the crawled urls need to be
    scraped, and then the urls are scored by our model_names. Hence, the domains 
    need to be submitted first.</p>
<h2 id='2-fetching-the-scores'>2. Fetching the scores</h2>
<p>After the domains have been submitted, the results will be available in some time.</p>

<p>Domain Scoring is complete when all of the urls have been scored by all model_names.</p>

<p>During the time between submission and fetching, some domains might already have 
    been scored, while other are still processing. In this case,
    the user has the option to fetch the partial scores.</p>
<h2 id='submit-domains-for-scoring'>Submit domains for scoring</h2>
<p>To score domains, they first needs to be submitted.</p>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.factmata.com/api/v0.1/score/domain"</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'domain'</span><span class="p">:</span> <span class="p">[</span>
    <span class="s">'www.example.com'</span><span class="p">,</span>
    <span class="s">'example.com'</span><span class="p">,</span>
  <span class="p">],</span>
  <span class="s">'threshold'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
  <span class="s">'crawl_number'</span><span class="p">:</span> <span class="mi">100</span>
<span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'x-api-key'</span><span class="p">:</span> <span class="n">API_KEY</span>
<span class="p">}</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.factmata.com/api/v0.1/score/domain'</span> <span class="se">\</span>
  --data <span class="s1">'{"domain": ["www.example.com", "example.com"], "threshold": 5, "crawl_number": 100}'</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"x-api-key: API_KEY"</span> 
</code></pre>
<blockquote>
<p>When the domains are successfully submitted for processing, the following response is returned</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">STATUS</span><span class="p">:</span><span class="w"> </span><span class="mi">202</span><span class="w">
</span></code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="s2">"answer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"request sent successfully, added 2 domains: example.com, www.example.com"</span><span class="p">}</span><span class="w">

</span></code></pre>
<blockquote>
<p>If the domains are already being processed, the following response is returned</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">STATUS</span><span class="p">:</span><span class="w"> </span><span class="mi">406</span><span class="w">
</span></code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="s2">"answer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"domains are already processing"</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>If the domains are already successfully processed, the following response is returned</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">STATUS</span><span class="p">:</span><span class="w"> </span><span class="mi">406</span><span class="w">
</span></code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="s2">"answer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"These domains are successfully processed, send GET"</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-request-3'>HTTP Request</h3>
<p>`POST https://api.factmata.com/api/v0.1/score/domain/</p>
<h3 id='request-payload-2'>Request Payload</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>domain</td>
<td>True</td>
<td>None</td>
<td>A valid domain string. In case any of the domains is malformed, request is aborted with status <code>422</code>. If all of the domains are already successfully processed in the last 90 days, status <code>406</code> is returned. If all of the domains are already processing, status <code>406</code> is returned.</td>
</tr>
<tr>
<td>threshold</td>
<td>False</td>
<td>5</td>
<td>The minimum number of crawled urls for the domains.</td>
</tr>
<tr>
<td>crawl_number</td>
<td>False</td>
<td>100</td>
<td>The desired number of crawled urls for the domains.</td>
</tr>
<tr>
<td>report</td>
<td>False</td>
<td>False</td>
<td>Flag to treat the endpoint as the GET endpoint (in order to send domains in body and not in a query string).</td>
</tr>
</tbody></table>

<aside class="notice">
Only new domains will be submitted from the domain list.
</aside>

<aside class="notice">
Domain is submitted once per 90 days, does not need to be submitted again in this period.
</aside>

<aside class="notice">
Currently only English web-pages are scored.
</aside>

<aside class="notice">
In case of a very big list of domains (100+), 504 status can be returned. 
It does not mean that the request failed.
</aside>

<aside class="warning">
A domain must not contain a protocol (http, https) or a subroute (example.com/page/1). 
</aside>
<h2 id='fetch-the-scores-for-domains'>Fetch the scores for domains</h2>
<p>After domains have been submitted for scoring, you can fetch the scores.
using this API.</p>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.factmata.com/api/v0.1/score/domain/"</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'domain'</span><span class="p">:</span> <span class="p">[</span>
    <span class="s">'www.example.com'</span><span class="p">,</span>
    <span class="s">'example.com'</span><span class="p">,</span>
  <span class="p">],</span>
<span class="p">}</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'x-api-key'</span><span class="p">:</span> <span class="n">API_KEY</span>
<span class="p">}</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.factmata.com/api/v0.1/score/domain/?domain='</span>www.example.com<span class="s1">'&amp;domain='</span>example.com<span class="s1">''</span> <span class="se">\</span>
  -H <span class="s2">"x-api-key: API_KEY"</span> 
</code></pre>
<blockquote>
<p>or you can use post with report flag for large amount of domains (not to hit query length limits)</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.factmata.com/api/v0.1/score/domain/"</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'domain'</span><span class="p">:</span> <span class="p">[</span>
    <span class="s">'www.example.com'</span><span class="p">,</span>
    <span class="s">'example.com'</span><span class="p">,</span>
  <span class="p">],</span>
  <span class="s">'report'</span><span class="p">:</span> <span class="bp">True</span>
<span class="p">}</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'x-api-key'</span><span class="p">:</span> <span class="n">API_KEY</span>
<span class="p">}</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.factmata.com/api/v0.1/score/domain/'</span> <span class="se">\</span>
  --data <span class="s1">'{"domain": ["www.example.com", "example.com"], "report": true}'</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"x-api-key: API_KEY"</span> 
</code></pre>
<blockquote>
<p>If the domain has finished processing, the JSON structured like this is returned:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"domain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.com"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"model_names_scores"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"model"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
        </span><span class="s2">"model_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hate"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.314</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"model"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
        </span><span class="s2">"model_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hype"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.315</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"model"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="s2">"model_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bait"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.316</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"model"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w">
        </span><span class="s2">"model_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"racism"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.317</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"model"</span><span class="p">:</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span><span class="w">
        </span><span class="s2">"model_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sexism"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.317</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"model"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
        </span><span class="s2">"model_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"insult"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.318</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"model"</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w">
        </span><span class="s2">"model_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"threat"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.319</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"model"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
        </span><span class="s2">"model_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"toxic"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.320</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"model"</span><span class="p">:</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="w">
        </span><span class="s2">"model_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"obscene"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.320</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"URLs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"https://example.com/feed/"</span><span class="p">,</span><span class="w"> </span><span class="s2">"https://example.com/about/"</span><span class="p">,</span><span class="w"> </span><span class="err">...</span><span class="p">],</span><span class="w">
    </span><span class="s2">"Example URL"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/feed/"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"Domain Score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.32</span><span class="w">
  </span><span class="p">},</span><span class="w"> 
  </span><span class="s2">"dt_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-12-11T14:38:35.246635+00:00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"dt_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-12-14T07:30:08.748324+00:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>If a domain is still processing, the following response is returned</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
   </span><span class="s2">"domain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.com"</span><span class="p">,</span><span class="w"> 
   </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"progress"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"dt_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-12-19T09:42:11.110089+00:00"</span><span class="p">,</span><span class="w"> 
   </span><span class="s2">"dt_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-12-19T09:42:11.110094+00:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>If a domain is absent, the following response is returned</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
   </span><span class="s2">"domain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.com"</span><span class="p">,</span><span class="w"> 
   </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"absent"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>If a domain finished with an error, the following response is returned</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"domain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.com"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Error message"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"dt_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-04T13:24:12.213925+00:00"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"dt_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-05T00:45:06.583050+00:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-request-4'>HTTP Request</h3>
<p><code>GET https://api.factmata.com/api/v0.1/score/domain/?domain=&quot;www.example.com&quot;&amp;domain=&quot;example.com&quot;</code></p>

<p>Fetching the scores has the following use cases:</p>
<h3 id='domain-is-successfully-processed'>Domain is successfully processed</h3>
<p>Status <code>success</code> and <code>score</code> with model_name scores are returned.</p>
<h3 id='domain-is-processed-with-an-error'>Domain is processed with an error</h3>
<p>Status <code>error</code> and <code>score</code> containing the error message are returned.</p>
<h3 id='domain-is-still-processing'>Domain is still processing</h3>
<p>Status <code>progress</code> is returned.</p>
<h3 id='domain-is-absent'>Domain is absent</h3>
<p>Status <code>absent</code> is returned.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>domain</td>
<td>None</td>
<td>True</td>
<td>A valid domain string. In case ant of the domains are malformed, request is aborted with status <code>422</code>.</td>
</tr>
</tbody></table>
<h1 id='intelligence'>Intelligence</h1>
<p>Intelligence API provides users with insights on topics of their choice. Users are provided with opinions, narratives and themes that emerge on a topic and with metrics denoting stance.
The endpoints enable obtaining insights for individual topic, as well comparing a number of topics (no upper limit on the number of topics to be compared).</p>
<h2 id='authentication'>Authentication</h2>
<p>The  API uses JWT tokens to authenticate requests. Login is performed via AWS Cognito. 
Once the JWT is received via Cognito, it should be passed in every API request via the Authorization 
header using the Bearer schema.</p>

<p>The NodeJS script for issuing JWT tokens from the CLI can be found in <a href="https://github.com/factmata/cognito-jwt-token">this repository</a>.
The JWT_TOKEN env variable can be set using the script from the repo above.</p>
<pre class="highlight shell tab-shell"><code><span class="nb">export </span><span class="nv">JWT_TOKEN</span><span class="o">=</span><span class="sb">`</span>node issue_token.js<span class="sb">`</span>
</code></pre>
<p>Example of a request after the authentication</p>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api-gw.production.factmata.com/api/v1/intelligence/report"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'X-API-KEY'</span><span class="p">:</span> <span class="n">f</span><span class="s">'Bearer {JWT_TOKEN}'</span>
<span class="p">}</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api-gw.production.factmata.com/api/v1/intelligence/report'</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"X-API-KEY: Bearer </span><span class="nv">$JWT_TOKEN</span><span class="s2">"</span> 
</code></pre>
<aside class="warning">
Do not share your API Key in publicly accessible platforms.
</aside>
<h2 id='pagination'>Pagination</h2>
<p>All list endpoints give a response in the following format</p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="s2">"previous"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"next"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Avon Hydra Fusion"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Avon Hydra"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='response-data'>Response data</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>count</td>
<td>int</td>
<td>Number of all elements</td>
</tr>
<tr>
<td>previous</td>
<td>int</td>
<td>Number of the previous pages, empty if there is no previous page</td>
</tr>
<tr>
<td>next</td>
<td>int</td>
<td>Number of the next pages, empty if there is no next page</td>
</tr>
<tr>
<td>result</td>
<td>list</td>
<td>List of objects limited by <code>page_size</code></td>
</tr>
</tbody></table>
<h2 id='query-params'>Query params</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>page</td>
<td>int</td>
<td>1</td>
<td>Page to retrieve. Has to be more than 0</td>
</tr>
<tr>
<td>page_size</td>
<td>int</td>
<td>20</td>
<td>Size of the result. Has to be between 1 and 100</td>
</tr>
</tbody></table>
<h2 id='common-errors'>Common errors</h2>
<table><thead>
<tr>
<th>Code</th>
<th>Text</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>{&#39;message&#39;: &#39;Unauthorized&#39;}</td>
<td>API Gateway response when the custom or Amazon Cognito authorizer failed to authenticate the caller.</td>
</tr>
<tr>
<td>403</td>
<td>{&#39;message&#39;: &#39;Access denied&#39;}</td>
<td>API Gateway response for authorization failure. Access is denied by Amazon Cognito authorizer</td>
</tr>
<tr>
<td>403</td>
<td>{&#39;message&#39;: &#39;Expired token&#39;}</td>
<td>API Gateway response for an AWS authentication token expired error</td>
</tr>
<tr>
<td>403</td>
<td>{&#39;message&#39;: &#39;Invalid API key&#39;} API Gateway response for an invalid API key submitted for a method requiring an API key</td>
<td></td>
</tr>
<tr>
<td>403</td>
<td>{&#39;message&#39;: &#39;Invalid signature&#39;}</td>
<td>API Gateway response for an invalid AWS signature error</td>
</tr>
<tr>
<td>403</td>
<td>{&#39;message&#39;: &#39;Missing authentication token&#39;}</td>
<td>API Gateway response for a missing authentication token error, including the cases when the client attempts to invoke an unsupported API method or resource</td>
</tr>
<tr>
<td>403</td>
<td>{&#39;message&#39;: &#39;WAF filtered&#39;}</td>
<td>API Gateway response when a request is blocked by AWS WAF</td>
</tr>
<tr>
<td>404</td>
<td>{&#39;message&#39;: &#39;Object with id $ID not found&#39;}</td>
<td>The wrong id passed to detail endpoint</td>
</tr>
</tbody></table>
<h2 id='definitions'>Definitions</h2>
<p>Insights Report - set of insights on a particular topic (e.g. Insights Report on protein powders). An insight report covers a single topic.</p>

<p>Insights Comparison - comparison of insights across a number of topics (e.g. Insights Comparison on Adidas vs Nike).</p>

<p>Topic - the subject for which Factmata generates insights for a customer, e.g. an industry (e.g. Protein powders), a brand (e.g. Johnson &amp; Johnson), a product (Avon Hydra Fusion) or an event (e.g. Covid-19 outbreak). The topic is defined by the customer. </p>

<p>Theme - a prominent aspect of a topic based on opinions that are the most interesting or popular (e.g. themes for the protein powders topic would be: price, flavour, ingredients, etc. Themes for Covid-19 outbreak would be: economy, vaccine, NHS, etc.). The themes are automatically extracted from the data.</p>

<p>Narrative - describes a story that emerges in a theme (e.g. narratives under the theme ‘flavour’ could be ‘plain taste’, ‘chalky flavour.’ For the theme &#39;vaccine&#39;, the narratives could be &#39;inefficient vaccination&#39;, &#39;vaccine availability&#39;, etc). Narratives are clusters of similar opinions and are generated automatically from the data.</p>

<p>Opinion - a statement made on a specific topic (e.g. &#39;The new range of Protein Powder X has a horrible chalky taste’ or &#39;It will take at least 18 months before Covid-19 vaccine is available for the public&#39;). Opinions are automatically extracted from the data and then grouped into narratives.</p>

<p>Opinion Maker - author of the opinion (e.g. John Smith, the World Health Organisation). Opinion makers are automatically extracted from the data.</p>
<h2 id='intelligence-metrics'>Intelligence Metrics</h2>
<p>The following table lists the current metrics and their definitions.</p>
<h2 id='metrics-definition'>Metrics definition</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>negative_stance_score</td>
<td>Likelihood of a piece of text being unfavourable towards the topic</td>
</tr>
<tr>
<td>positive_stance_score</td>
<td>Likelihood of a piece of text being favourable towards the topic</td>
</tr>
<tr>
<td>outlierness_score</td>
<td>Interesting content which is less frequently featured on the Internet or seem unusual</td>
</tr>
<tr>
<td>popularity_score</td>
<td>Number of shares and likes a piece of text has received</td>
</tr>
<tr>
<td>influencer_score</td>
<td>Number of Twitter followers an opinion maker has</td>
</tr>
<tr>
<td>propaganda_score</td>
<td>Likelihood that a piece of text is politically biased</td>
</tr>
<tr>
<td>bot_generated_score</td>
<td>Likelihood that a piece of text have been generated by bots</td>
</tr>
<tr>
<td>threat_score</td>
<td>Likelihood of biased views being widely spread. The metric takes into account propaganda score and popularity</td>
</tr>
</tbody></table>

<p>The following table lists the current metrics and their type and range.</p>
<h2 id='metrics-type-and-range'>Metrics type and range</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Range</th>
</tr>
</thead><tbody>
<tr>
<td>negative_stance_score</td>
<td>float</td>
<td>0.00 - 1.00</td>
</tr>
<tr>
<td>positive_stance_score</td>
<td>float</td>
<td>0.00 - 1.00</td>
</tr>
<tr>
<td>outlierness_score</td>
<td>float</td>
<td>0.00 - 1.00</td>
</tr>
<tr>
<td>popularity_score</td>
<td>integer</td>
<td>0+</td>
</tr>
<tr>
<td>influencer_score</td>
<td>integer</td>
<td>0+</td>
</tr>
<tr>
<td>propaganda_score</td>
<td>float</td>
<td>0.00 - 1.00</td>
</tr>
<tr>
<td>bot_generated_score</td>
<td>float</td>
<td>0.00 - 1.00</td>
</tr>
<tr>
<td>threat_score</td>
<td>float</td>
<td>0.00 - 1.00</td>
</tr>
</tbody></table>

<p>The following table lists the current metrics and their availability per the type of product proposition.</p>
<h2 id='metrics-by-factmata-s-product-proposition'>Metrics by Factmata’s product proposition</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Brands proposition</th>
<th>Fake news proposition</th>
</tr>
</thead><tbody>
<tr>
<td>negative_stance_score</td>
<td>yes</td>
<td>yes</td>
</tr>
<tr>
<td>positive_stance_score</td>
<td>yes</td>
<td>yes</td>
</tr>
<tr>
<td>outlierness_score</td>
<td>yes</td>
<td>yes</td>
</tr>
<tr>
<td>popularity_score</td>
<td>yes</td>
<td>yes</td>
</tr>
<tr>
<td>influencer_score</td>
<td>yes</td>
<td>yes</td>
</tr>
<tr>
<td>propaganda_score</td>
<td>no</td>
<td>yes</td>
</tr>
<tr>
<td>bot_generated_score</td>
<td>no</td>
<td>yes</td>
</tr>
<tr>
<td>threat_score</td>
<td>no</td>
<td>yes</td>
</tr>
</tbody></table>

<p>The following table lists the current metrics and their availability per text&#39;s domain type.</p>
<h2 id='metrics-for-brands-proposition-by-text-39-s-domain-type'>Metrics for Brands proposition by text&#39;s domain type</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Social media</th>
<th>Any other*</th>
</tr>
</thead><tbody>
<tr>
<td>negative_stance_score</td>
<td>yes</td>
<td>yes</td>
</tr>
<tr>
<td>positive_stance_score</td>
<td>yes</td>
<td>yes</td>
</tr>
<tr>
<td>outlierness_score</td>
<td>yes</td>
<td>no</td>
</tr>
<tr>
<td>popularity_score</td>
<td>yes</td>
<td>no</td>
</tr>
<tr>
<td>influencer_score</td>
<td>yes</td>
<td>no</td>
</tr>
</tbody></table>

<p>*E.g. reviews, news, customer care transcripts.</p>

<p>The following table lists the current metrics and their availability per entity type.</p>
<h2 id='metrics-by-entity-type'>Metrics by entity type</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Theme</th>
<th>Narrative</th>
<th>Opinion</th>
<th>Opinion Maker</th>
<th>WebContent</th>
</tr>
</thead><tbody>
<tr>
<td>negative_stance_score</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
<td>no</td>
<td>no</td>
</tr>
<tr>
<td>positive_stance_score</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
<td>no</td>
<td>no</td>
</tr>
<tr>
<td>outlierness_score</td>
<td>yes</td>
<td>yes</td>
<td>no</td>
<td>no</td>
<td>no</td>
</tr>
<tr>
<td>popularity_score</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
<td>no</td>
<td>no</td>
</tr>
<tr>
<td>influencer_score</td>
<td>yes</td>
<td>yes</td>
<td>no</td>
<td>yes</td>
<td>no</td>
</tr>
<tr>
<td>propaganda_score</td>
<td>yes</td>
<td>yes</td>
<td>no</td>
<td>no</td>
<td>yes</td>
</tr>
<tr>
<td>bot_generated_score</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
<td>no</td>
<td>no</td>
</tr>
<tr>
<td>threat_score</td>
<td>yes</td>
<td>yes</td>
<td>no</td>
<td>no</td>
<td>no</td>
</tr>
</tbody></table>
<h2 id='api-endpoints'>API endpoints</h2><h2 id='reports'>Reports</h2>
<p>Report - a set of insights on a particular topics (e.g. Insights Report on protein powders).</p>
<h2 id='list-reports'>List reports</h2><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api-gw.production.factmata.com/api/v1/intelligence/report"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'X-API-KEY'</span><span class="p">:</span> <span class="n">f</span><span class="s">'Bearer {JWT_TOKEN}'</span>
<span class="p">}</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api-gw.production.factmata.com/api/v1/intelligence/report'</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"X-API-KEY: Bearer </span><span class="nv">$JWT_TOKEN</span><span class="s2">"</span>

</code></pre>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"insights"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Report 1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-01T00:00:00+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-01T00:00:00+00:00"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"comparison"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Report 2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-01T00:00:00+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-01T00:00:00+00:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Returns a list of reports tracked for a customer.</p>
<h4 id='http-request-5'>HTTP Request</h4>
<p><code>GET https://api-gw.production.factmata.com/api/v1/intelligence/report</code></p>
<h2 id='detail-reports'>Detail reports</h2><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api-gw.production.factmata.com/api/v1/intelligence/report/{id}"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'X-API-KEY'</span><span class="p">:</span> <span class="n">f</span><span class="s">'Bearer {JWT_TOKEN}'</span>
<span class="p">}</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api-gw.production.factmata.com/api/v1/intelligence/report/$ID'</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"X-API-KEY: Bearer </span><span class="nv">$JWT_TOKEN</span><span class="s2">"</span>

</code></pre>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"insights"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Report 1"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-01T00:00:00+00:00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-01T00:00:00+00:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Returns a report by its id.</p>
<h4 id='http-request-6'>HTTP Request</h4>
<p><code>GET https://api-gw.production.factmata.com/api/v1/intelligence/report/:id</code></p>
<h2 id='report-version'>Report version</h2>
<p>A report version represents different versions of the same report and the data (topic, narratives) that belong to the specific version.</p>
<h2 id='list-versions'>List versions</h2><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api-gw.production.factmata.com/api/v1/intelligence/report/{id}/version"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'X-API-KEY'</span><span class="p">:</span> <span class="n">f</span><span class="s">'Bearer {JWT_TOKEN}'</span>
<span class="p">}</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api-gw.production.factmata.com/api/v1/intelligence/report/$ID/version'</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"X-API-KEY: Bearer </span><span class="nv">$JWT_TOKEN</span><span class="s2">"</span>

</code></pre>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Version 1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-01T00:00:00+00:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-01T00:00:00+00:00"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Version 2"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-01T00:00:00+00:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-01T00:00:00+00:00"</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Returns a list of version tracked for a report.</p>
<h4 id='http-request-7'>HTTP Request</h4>
<p><code>GET https://api-gw.production.factmata.com/api/v1/intelligence/report/:id/version</code></p>
<h2 id='copy-version'>Copy version</h2><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api-gw.production.factmata.com/api/v1/intelligence/report/{id}/version"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'X-API-KEY'</span><span class="p">:</span> <span class="n">f</span><span class="s">'Bearer {JWT_TOKEN}'</span>
<span class="p">}</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api-gw.production.factmata.com/api/v1/intelligence/report/$ID/version'</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"X-API-KEY: Bearer </span><span class="nv">$JWT_TOKEN</span><span class="s2">"</span>

</code></pre>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="mi">2</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Make a copy of a report by creating a new version with all of the data copied.</p>
<h4 id='http-request-8'>HTTP Request</h4>
<p><code>POST https://api-gw.production.factmata.com/api/v1/intelligence/report/:id/version</code></p>
<h2 id='update-report-version'>Update report version</h2><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api-gw.production.factmata.com/api/v1/intelligece/version/{id}"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'X-API-KEY'</span><span class="p">:</span> <span class="n">f</span><span class="s">'Bearer {JWT_TOKEN}'</span>
<span class="p">}</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api-gw.production.factmata.com/api/v1/intelligence/version/$ID'</span> <span class="se">\</span>
  -X PATCH <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"X-API-KEY: Bearer </span><span class="nv">$JWT_TOKEN</span><span class="s2">"</span>

</code></pre>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Version 2"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-01T00:00:00+00:00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-01T00:00:00+00:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h4 id='http-request-9'>HTTP Request</h4>
<p><code>PATCH https://api-gw.production.factmata.com/api/v1/intelligence/version/:id</code></p>
<h2 id='topics'>Topics</h2>
<p>Topic - the subject for which Factmata generates insights for a customer, e.g. an industry (e.g. Protein powders), a brand (e.g. Avon), a product (J&amp;J Baby Shampoo) or an event (e.g. Coronavirus outbreak). The topic is defined by the customer. Customer can obtain insights on individual topic (Insights Report) as well as compare multiple topics (Insights Comparison Report).</p>
<h2 id='list-topics'>List topics</h2><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api-gw.production.factmata.com/api/v1/intelligence/report/{report_id}/version/{report_version_id}/topic"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'X-API-KEY'</span><span class="p">:</span> <span class="n">f</span><span class="s">'Bearer {JWT_TOKEN}'</span>
<span class="p">}</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api-gw.production.factmata.com/api/v1/intelligence/report/$REPORT_ID/version/$REPORT_VERSION_ID/topic'</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"X-API-KEY: Bearer </span><span class="nv">$JWT_TOKEN</span><span class="s2">"</span> 
</code></pre>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
    </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Avon Hydra Fusion"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-01T00:00:00+00:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Returns a list of topics analyzed for a customer.</p>
<h4 id='http-request-10'>HTTP Request</h4>
<p><code>GET https://api-gw.production.factmata.com/api/v1/intelligence/report/&lt;int:report_id&gt;/version/&lt;int:report_version_id&gt;/topic</code></p>
<h2 id='detail-topics'>Detail topics</h2><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">f</span><span class="s">"https://api-gw.production.factmata.com/api/v1/intelligence/topic/{id}"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'X-API-KEY'</span><span class="p">:</span> <span class="n">f</span><span class="s">'Bearer {JWT_TOKEN}'</span>
<span class="p">}</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api-gw.production.factmata.com/api/v1/intelligence/topic/$ID'</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"X-API-KEY: Bearer </span><span class="nv">$JWT_TOKEN</span><span class="s2">"</span> 
</code></pre>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
  </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Avon Hydra Fusion"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-01T00:00:00+00:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Returns a topic by its id.</p>
<h4 id='http-request-11'>HTTP Request</h4>
<p><code>GET https://api-gw.production.factmata.com/api/v1/intelligence/topic/:id</code></p>
<h2 id='themes'>Themes</h2>
<p>Theme - a prominent aspect of a topic based on opinions that are the most interesting or popular (e.g. themes for the protein powders topic would be: price, flavour, ingredients, etc. Themes for Covid-19 outbreak would be: economy, vaccine, NHS, etc.). The themes are automatically extracted from the data.</p>
<h2 id='list-topic-themes'>List topic themes</h2><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">f</span><span class="s">"https://api-gw.production.factmata.com/v1/intelligence/topic/{topic_id}/theme"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'X-API-KEY'</span><span class="p">:</span> <span class="n">f</span><span class="s">'Bearer {JWT_TOKEN}'</span>
<span class="p">}</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api-gw.production.factmata.com/v1/intelligence/topic/$THEME_ID/theme'</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"X-API-KEY: Bearer </span><span class="nv">$JWT_TOKEN</span><span class="s2">"</span> 
</code></pre>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cost"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"metrics"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"negative_stance_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.32324123</span><span class="p">,</span><span class="w">
      </span><span class="s2">"positive_stance_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.22623175</span><span class="p">,</span><span class="w">
      </span><span class="s2">"outlierness_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.296705679</span><span class="p">,</span><span class="w">
      </span><span class="s2">"popularity_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.56848747</span><span class="p">,</span><span class="w">
      </span><span class="s2">"propaganda_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.48008755</span><span class="p">,</span><span class="w">
      </span><span class="s2">"threat_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.08953477</span><span class="p">,</span><span class="w">
      </span><span class="s2">"num_narratives"</span><span class="p">:</span><span class="w"> </span><span class="mi">65</span><span class="p">,</span><span class="w">
      </span><span class="s2">"num_opinions"</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"metrics_by_date"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"recorded_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-09-06T00:00:00+00:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"values"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"negative_stance_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.41308644</span><span class="p">,</span><span class="w">
          </span><span class="s2">"positive_stance_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.48008755</span><span class="p">,</span><span class="w">
          </span><span class="s2">"outlierness_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.254146592</span><span class="p">,</span><span class="w">
          </span><span class="s2">"popularity_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.276934175</span><span class="p">,</span><span class="w">
          </span><span class="s2">"propaganda_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.090985734</span><span class="p">,</span><span class="w">
          </span><span class="s2">"threat_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.07531446</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-01T00:00:00+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"oldest_webcontent_published_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-01-03T00:00:00+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"newest_webcontent_published_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-23T00:00:00+00:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Returns a list of themes in a topic.</p>
<h4 id='http-request-12'>HTTP Request</h4>
<p><code>GET https://api-gw.production.factmata.com/api/v1/intelligence/topic/:topicId/theme</code></p>
<h4 id='query-parameters'>Query parameters</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>created_at_lt</td>
<td>ISO 8601 string</td>
<td>Filter by created_at, less than</td>
</tr>
<tr>
<td>created_at_gt</td>
<td>ISO 8601 string</td>
<td>Filter by created_at, greater than</td>
</tr>
<tr>
<td>created_at_lte</td>
<td>ISO 8601 string</td>
<td>Filter by created_at, less than or equal</td>
</tr>
<tr>
<td>created_at_gte</td>
<td>ISO 8601 string</td>
<td>Filter by created_at, greater than or equal</td>
</tr>
<tr>
<td>metrics_created_at_lt</td>
<td>ISO 8601 string</td>
<td>Filter metrics list by created_at,  less than</td>
</tr>
<tr>
<td>metrics_created_at_gt</td>
<td>ISO 8601 string</td>
<td>Filter metrics list by created_at,  greater than</td>
</tr>
<tr>
<td>metrics_created_at_lte</td>
<td>ISO 8601 string</td>
<td>Filter metrics list by created_at,  less than or equal</td>
</tr>
<tr>
<td>metrics_created_at_gte</td>
<td>ISO 8601 string</td>
<td>Filter metrics list by created_at,  greater than or equal</td>
</tr>
<tr>
<td>sort_by</td>
<td>string</td>
<td>Sorting key. The default value is <code>num_narratives</code>. Supported values include the ones returned in the metrics array. Items in <code>metrics_by_date array</code> are sorted in chronological order based on <code>recorded_on</code>.</td>
</tr>
</tbody></table>
<h2 id='detail-themes'>Detail themes</h2><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">f</span><span class="s">"https://api-gw.production.factmata.com/api/v1/intelligence/theme/{id}"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'X-API-KEY'</span><span class="p">:</span> <span class="n">f</span><span class="s">'Bearer {JWT_TOKEN}'</span>
<span class="p">}</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api-gw.production.factmata.com/api/v1/intelligence/theme/$ID'</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"X-API-KEY: Bearer </span><span class="nv">$JWT_TOKEN</span><span class="s2">"</span> 
</code></pre>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cost"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"metrics"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"negative_stance_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.32324123</span><span class="p">,</span><span class="w">
    </span><span class="s2">"positive_stance_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.22623175</span><span class="p">,</span><span class="w">
    </span><span class="s2">"outlierness_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.296705679</span><span class="p">,</span><span class="w">
    </span><span class="s2">"popularity_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.56848747</span><span class="p">,</span><span class="w">
    </span><span class="s2">"propaganda_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.48008755</span><span class="p">,</span><span class="w">
    </span><span class="s2">"threat_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.08953477</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_narratives"</span><span class="p">:</span><span class="w"> </span><span class="mi">65</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_opinions"</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"metrics_by_date"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"recorded_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-09-06T00:00:00+00:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"values"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"negative_stance_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.41308644</span><span class="p">,</span><span class="w">
        </span><span class="s2">"positive_stance_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.48008755</span><span class="p">,</span><span class="w">
        </span><span class="s2">"outlierness_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.254146592</span><span class="p">,</span><span class="w">
        </span><span class="s2">"popularity_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.276934175</span><span class="p">,</span><span class="w">
        </span><span class="s2">"propaganda_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.090985734</span><span class="p">,</span><span class="w">
        </span><span class="s2">"threat_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.07531446</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-01T00:00:00+00:00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"oldest_webcontent_published_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-01-03T00:00:00+00:00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"newest_webcontent_published_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-23T00:00:00+00:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Return a theme by its id.</p>
<h4 id='http-request-13'>HTTP Request</h4>
<p><code>GET https://api-gw.production.factmata.com/api/v1/intelligence/theme/:id</code></p>
<h4 id='query-parameters-2'>Query parameters</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>metrics_created_at_lt</td>
<td>ISO 8601 string</td>
<td>Filter metrics list by created_at,  less than</td>
</tr>
<tr>
<td>metrics_created_at_gt</td>
<td>ISO 8601 string</td>
<td>Filter metrics list by created_at,  greater than</td>
</tr>
<tr>
<td>metrics_created_at_lte</td>
<td>ISO 8601 string</td>
<td>Filter metrics list by created_at,  less than or equal</td>
</tr>
<tr>
<td>metrics_created_at_gte</td>
<td>ISO 8601 string</td>
<td>Filter metrics list by created_at,  greater than or equal</td>
</tr>
</tbody></table>
<h2 id='narratives'>Narratives</h2>
<p>Narrative - describes a story that emerges in a theme (e.g. narratives under the theme ‘flavour’ could be ‘plain taste’, ‘chalky flavour.’ For the theme &#39;vaccine&#39;, the narratives could be &#39;inefficient vaccination&#39;, &#39;vaccine availability&#39;, etc). Narratives are clusters of similar opinions and are generated automatically from the data.</p>
<h2 id='list-narratives'>List narratives</h2><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">f</span><span class="s">"https://api-gw.production.factmata.com/v1/intelligence/topic/{topic_id}/theme/{theme_id}/narrative"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'X-API-KEY'</span><span class="p">:</span> <span class="n">f</span><span class="s">'Bearer {JWT_TOKEN}'</span>
<span class="p">}</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api-gw.production.factmata.com/v1/intelligence/topic/$TOPIC_ID/theme/$THEME_ID/narrative'</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"X-API-KEY: Bearer </span><span class="nv">$JWT_TOKEN</span><span class="s2">"</span> 
</code></pre>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
    </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cream based cosmetics"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"metrics"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"negative_stance_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.32324123</span><span class="p">,</span><span class="w">
      </span><span class="s2">"positive_stance_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.22623175</span><span class="p">,</span><span class="w">
      </span><span class="s2">"outlierness_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.296705679</span><span class="p">,</span><span class="w">
      </span><span class="s2">"popularity_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.56848747</span><span class="p">,</span><span class="w">
      </span><span class="s2">"propaganda_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.48008755</span><span class="p">,</span><span class="w">
      </span><span class="s2">"threat_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.08953477</span><span class="p">,</span><span class="w">
      </span><span class="s2">"num_opinions"</span><span class="p">:</span><span class="w"> </span><span class="mi">223</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"metrics_by_date"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"recorded_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-09-06T00:00:00+00:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"values"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"negative_stance_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.41308644</span><span class="p">,</span><span class="w">
          </span><span class="s2">"positive_stance_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.48008755</span><span class="p">,</span><span class="w">
          </span><span class="s2">"outlierness_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.254146592</span><span class="p">,</span><span class="w">
          </span><span class="s2">"popularity_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.276934175</span><span class="p">,</span><span class="w">
          </span><span class="s2">"propaganda_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.090985734</span><span class="p">,</span><span class="w">
          </span><span class="s2">"threat_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.07531446</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-01T00:00:00+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"oldest_webcontent_published_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-01-03T00:00:00+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"newest_webcontent_published_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-23T00:00:00+00:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Returns a list of narratives for a theme.</p>
<h4 id='http-request-14'>HTTP Request</h4>
<p><code>GET https://api-gw.production.factmata.com/api/v1/intelligence/topic/:topic_id/theme/:theme_id/narrative</code></p>
<h4 id='query-parameters-3'>Query parameters</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>created_at_lt</td>
<td>ISO 8601 string</td>
<td>Filter by created_at, less than</td>
</tr>
<tr>
<td>created_at_gt</td>
<td>ISO 8601 string</td>
<td>Filter by created_at, greater than</td>
</tr>
<tr>
<td>created_at_lte</td>
<td>ISO 8601 string</td>
<td>Filter by created_at, less than or equal</td>
</tr>
<tr>
<td>created_at_gte</td>
<td>ISO 8601 string</td>
<td>Filter by created_at, greater than or equal</td>
</tr>
<tr>
<td>metrics_created_at_lt</td>
<td>ISO 8601 string</td>
<td>Filter metrics list by created_at,  less than</td>
</tr>
<tr>
<td>metrics_created_at_gt</td>
<td>ISO 8601 string</td>
<td>Filter metrics list by created_at,  greater than</td>
</tr>
<tr>
<td>metrics_created_at_lte</td>
<td>ISO 8601 string</td>
<td>Filter metrics list by created_at,  less than or equal</td>
</tr>
<tr>
<td>metrics_created_at_gte</td>
<td>ISO 8601 string</td>
<td>Filter metrics list by created_at,  greater than or equal</td>
</tr>
<tr>
<td>sort_by</td>
<td>string</td>
<td>Sorting key. The default value is <code>num_opinions</code>. Supported values include the ones returned in the metrics array. Items in <code>metrics_by_date array</code> are sorted in chronological order based on <code>recorded_on</code>.</td>
</tr>
</tbody></table>
<h2 id='detail-narratives'>Detail narratives</h2><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">f</span><span class="s">"https://api-gw.production.factmata.com/api/v1/intelligence/narrative/{id}"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'X-API-KEY'</span><span class="p">:</span> <span class="n">f</span><span class="s">'Bearer {JWT_TOKEN}'</span>
<span class="p">}</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api-gw.production.factmata.com/api/v1/intelligence/narrative/$ID'</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"X-API-KEY: Bearer </span><span class="nv">$JWT_TOKEN</span><span class="s2">"</span> 
</code></pre>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
  </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cream based cosmetics"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"metrics"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"negative_stance_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.32324123</span><span class="p">,</span><span class="w">
    </span><span class="s2">"positive_stance_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.22623175</span><span class="p">,</span><span class="w">
    </span><span class="s2">"outlierness_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.296705679</span><span class="p">,</span><span class="w">
    </span><span class="s2">"popularity_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.56848747</span><span class="p">,</span><span class="w">
    </span><span class="s2">"propaganda_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.48008755</span><span class="p">,</span><span class="w">
    </span><span class="s2">"threat_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.08953477</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_opinions"</span><span class="p">:</span><span class="w"> </span><span class="mi">223</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"metrics_by_date"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"recorded_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-09-06T00:00:00+00:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"values"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"negative_stance_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.41308644</span><span class="p">,</span><span class="w">
        </span><span class="s2">"positive_stance_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.48008755</span><span class="p">,</span><span class="w">
        </span><span class="s2">"outlierness_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.254146592</span><span class="p">,</span><span class="w">
        </span><span class="s2">"popularity_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.276934175</span><span class="p">,</span><span class="w">
        </span><span class="s2">"propaganda_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.090985734</span><span class="p">,</span><span class="w">
        </span><span class="s2">"threat_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.07531446</span><span class="p">,</span><span class="w">
        </span><span class="s2">"num_opinions"</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-01T00:00:00+00:00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"oldest_webcontent_published_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-01-03T00:00:00+00:00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"newest_webcontent_published_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-23T00:00:00+00:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Return a narrative by its id.</p>
<h4 id='http-request-15'>HTTP Request</h4>
<p><code>GET https://api-gw.production.factmata.com/api/v1/intelligence/narrative/:id</code></p>
<h4 id='query-parameters-4'>Query parameters</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>metrics_created_at_lt</td>
<td>ISO 8601 string</td>
<td>Filter metrics list by created_at,  less than</td>
</tr>
<tr>
<td>metrics_created_at_gt</td>
<td>ISO 8601 string</td>
<td>Filter metrics list by created_at,  greater than</td>
</tr>
<tr>
<td>metrics_created_at_lte</td>
<td>ISO 8601 string</td>
<td>Filter metrics list by created_at,  less than or equal</td>
</tr>
<tr>
<td>metrics_created_at_gte</td>
<td>ISO 8601 string</td>
<td>Filter metrics list by created_at,  greater than or equal</td>
</tr>
</tbody></table>
<h2 id='opinions'>Opinions</h2>
<p>Opinion - a statement made on a specific topic (e.g. &#39;The new range of Protein Powder X has a horrible chalky taste’ or &#39;It will take at least 18 months before Covid-19 vaccine is available for the public&#39;). Opinions are automatically extracted from the data and then grouped into narratives.</p>
<h2 id='list-narrative-opinions'>List narrative opinions</h2><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">f</span><span class="s">"https://api-gw.production.factmata.com/v1/intelligence/narrative/{narrative_id}/opinion"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'X-API-KEY'</span><span class="p">:</span> <span class="n">f</span><span class="s">'Bearer {JWT_TOKEN}'</span>
<span class="p">}</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api-gw.production.factmata.com/v1/intelligence/narrative/:id/opinion'</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"X-API-KEY: Bearer </span><span class="nv">$JWT_TOKEN</span><span class="s2">"</span> 
</code></pre>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">199</span><span class="p">,</span><span class="w">
    </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"acquia has a high cost  at 100k annually"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"metrics"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"negative_stance_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.41308644</span><span class="p">,</span><span class="w">
      </span><span class="s2">"positive_stance_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.48008755</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bot_generated_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.254146592</span><span class="p">,</span><span class="w">
      </span><span class="s2">"popularity_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.276934175</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-01T00:00:00+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"opinion_makers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://twitter.com/@raybae689"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"influencer_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.32</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"webcontents"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ARTICLE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"download_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.factmata.com/v1/downloads/webcontents/53374d64-223d-11ea-978f-2e728ce88125.json"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Roydon Ng"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"author_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://twitter.com/RoydonNg"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"christiantoday.com.au"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"page_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://christiantoday.com.au/news/democracy-cant-save-hong-kong.html"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"resolved_page_url"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"published_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-11T00:00:00+00:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"metrics"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"propaganda_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.03</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Returns a list of opinions for a narrative.</p>
<h4 id='http-request-16'>HTTP Request</h4>
<p><code>GET https://api-gw.production.factmata.com/api/v1/intelligence/narrative/:narrative_id/opinion</code></p>
<h4 id='query-parameters-5'>Query parameters</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>sort_by</td>
<td>string</td>
<td>Sorting key. The default value is popularity_score. Supported values include the ones returned in the metrics array.</td>
</tr>
</tbody></table>
<h2 id='detail-opinions'>Detail opinions</h2><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">f</span><span class="s">"https://api-gw.production.factmata.com/v1/opinion/{id}"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'X-API-KEY'</span><span class="p">:</span> <span class="n">f</span><span class="s">'Bearer {JWT_TOKEN}'</span>
<span class="p">}</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api-gw.production.factmata.com/api/v1/opinion/$ID'</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"X-API-KEY: Bearer </span><span class="nv">$JWT_TOKEN</span><span class="s2">"</span> 
</code></pre>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">199</span><span class="p">,</span><span class="w">
  </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"acquia has a high cost  at 100k annually"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"metrics"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"negative_stance_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.41308644</span><span class="p">,</span><span class="w">
    </span><span class="s2">"positive_stance_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.48008755</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bot_generated_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.254146592</span><span class="p">,</span><span class="w">
    </span><span class="s2">"popularity_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.276934175</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-01T00:00:00+00:00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"opinion_makers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://twitter.com/@raybae689"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"influencer_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.32</span><span class="w">
    </span><span class="p">},</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"webcontents"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ARTICLE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"download_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.factmata.com/v1/downloads/webcontents/53374d64-223d-11ea-978f-2e728ce88125.json"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Roydon Ng"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"author_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://twitter.com/RoydonNg"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"christiantoday.com.au"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"page_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://christiantoday.com.au/news/democracy-cant-save-hong-kong.html"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"resolved_page_url"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"published_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-11T00:00:00+00:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"metrics"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"propaganda_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.03</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Returns an opinion by its ID.</p>
<h4 id='http-request-17'>HTTP Request</h4>
<p><code>GET https://api-gw.production.factmata.com/api/v1/opinion/:id</code></p>
<h2 id='opinions-makers'>Opinions makers</h2>
<p>Opinion Maker - author of the opinion (e.g. John Smith, the World Health Organisation). Opinion makers are automatically extracted from the data.</p>
<h2 id='list-opinion-makers'>List opinion makers</h2><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">f</span><span class="s">"https://api-gw.production.factmata.com/v1/intelligence/opinion/{narrative_id}/opinion_maker"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'X-API-KEY'</span><span class="p">:</span> <span class="n">f</span><span class="s">'Bearer {JWT_TOKEN}'</span>
<span class="p">}</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api-gw.production.factmata.com/v1/intelligence/opinion/$OPINION_ID/opinion_maker'</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"X-API-KEY: Bearer </span><span class="nv">$JWT_TOKEN</span><span class="s2">"</span> 
</code></pre>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://twitter.com/@raybae689"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"influencer_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.32</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-01T00:00:00+00:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Returns a list of opinion makers for an opinion sorted by influencer_score in descending order.</p>
<h4 id='http-request-18'>HTTP Request</h4>
<p><code>GET https://api-gw.production.factmata.com/api/v1/intelligence/opinion/:opinion_id/opinion_maker</code></p>
<h2 id='detail-opinion-markers'>Detail opinion markers</h2><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">f</span><span class="s">"https://api-gw.production.factmata.com/v1/intelligence/opinion_maker/{id}"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'X-API-KEY'</span><span class="p">:</span> <span class="n">f</span><span class="s">'Bearer {JWT_TOKEN}'</span>
<span class="p">}</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api-gw.production.factmata.com/v1/intelligence/opinion_maker/$ID'</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"X-API-KEY: Bearer </span><span class="nv">$JWT_TOKEN</span><span class="s2">"</span> 
</code></pre>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
  </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://twitter.com/@raybae689"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"influencer_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.32</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-01T00:00:00+00:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Returns an opinion maker by its id.</p>
<h4 id='http-request-19'>HTTP Request</h4>
<p><code>GET https://api-gw.production.factmata.com/api/v1/intelligence/opinion_maker/:id</code></p>
<h2 id='comparisons'>Comparisons</h2>
<p>Comparison of insights across a number of topics (e.g. Adidas vs Nike). It compares the topics across their common themes.</p>
<h2 id='list-comparisons'>List comparisons</h2><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">f</span><span class="s">"https://api-gw.production.factmata.com/v1/intelligence/comparison"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'X-API-KEY'</span><span class="p">:</span> <span class="n">f</span><span class="s">'Bearer {JWT_TOKEN}'</span>
<span class="p">}</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api-gw.production.factmata.com/v1/intelligence/comparison'</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"X-API-KEY: Bearer </span><span class="nv">$JWT_TOKEN</span><span class="s2">"</span> 
</code></pre>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Avon vs. Neutrogena"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-01T00:00:00+00:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Returns a list of comparisons.</p>
<h4 id='http-request-20'>HTTP Request</h4>
<p><code>GET https://api-gw.production.factmata.com/api/v1/intelligence/comparison</code></p>
<h2 id='detail-comparisons'>Detail comparisons</h2><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">f</span><span class="s">"https://3gg17c8hfh.execute-api.eu-west-1.amazonaws.com/production /v1/intelligence/comparison/{id}"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'X-API-KEY'</span><span class="p">:</span> <span class="n">f</span><span class="s">'Bearer {JWT_TOKEN}'</span>
<span class="p">}</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api-gw.production.factmata.com/v1/intelligence/comparison/$ID'</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"X-API-KEY: Bearer </span><span class="nv">$JWT_TOKEN</span><span class="s2">"</span> 
</code></pre>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Avon vs. Neutrogena"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-01T00:00:00+00:00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"topics"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
      </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Avon Hydra Fusion"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-01T00:00:00+00:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"themes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cost"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"topic_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">23</span><span class="p">,</span><span class="w">
          </span><span class="s2">"metrics"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"negative_stance_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.32324123</span><span class="p">,</span><span class="w">
            </span><span class="s2">"positive_stance_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.22623175</span><span class="p">,</span><span class="w">
            </span><span class="s2">"outlierness_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.296705679</span><span class="p">,</span><span class="w">
            </span><span class="s2">"popularity_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.56848747</span><span class="p">,</span><span class="w">
            </span><span class="s2">"propaganda_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.48008755</span><span class="p">,</span><span class="w">
            </span><span class="s2">"threat_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.08953477</span><span class="p">,</span><span class="w">
            </span><span class="s2">"num_narratives"</span><span class="p">:</span><span class="w"> </span><span class="mi">65</span><span class="p">,</span><span class="w">
            </span><span class="s2">"num_opinions"</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"metrics_by_date"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="s2">"recorded_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-09-06T00:00:00+00:00"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"values"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"negative_stance_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.41308644</span><span class="p">,</span><span class="w">
                </span><span class="s2">"positive_stance_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.48008755</span><span class="p">,</span><span class="w">
                </span><span class="s2">"outlierness_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.254146592</span><span class="p">,</span><span class="w">
                </span><span class="s2">"popularity_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.276934175</span><span class="p">,</span><span class="w">
                </span><span class="s2">"propaganda_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.090985734</span><span class="p">,</span><span class="w">
                </span><span class="s2">"threat_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.07531446</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">],</span><span class="w">
          </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-01T00:00:00+00:00"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"oldest_webcontent_published_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-01-03T00:00:00+00:00"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"newest_webcontent_published_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-23T00:00:00+00:00"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Returns a comparison by its ID.</p>
<h4 id='http-request-21'>HTTP Request</h4>
<p><code>GET https://api-gw.production.factmata.com/api/v1/intelligence/comparison/:id</code></p>
<h4 id='query-parameters-6'>Query parameters</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>metrics_created_at_lt</td>
<td>ISO 8601 string</td>
<td>Filter metrics list by created_at,  less than</td>
</tr>
<tr>
<td>metrics_created_at_gt</td>
<td>ISO 8601 string</td>
<td>Filter metrics list by created_at,  greater than</td>
</tr>
<tr>
<td>metrics_created_at_lte</td>
<td>ISO 8601 string</td>
<td>Filter metrics list by created_at,  less than or equal</td>
</tr>
<tr>
<td>metrics_created_at_gte</td>
<td>ISO 8601 string</td>
<td>Filter metrics list by created_at,  greater than or equal</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="python">python</a>
          </div>
      </div>
    </div>
  </body>
</html>
