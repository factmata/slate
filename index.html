
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;python&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="python">python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#authorization" class="toc-h1 toc-link" data-title="Authorization">Authorization</a>
          </li>
          <li>
            <a href="#scoring-urls" class="toc-h1 toc-link" data-title="Scoring URLs">Scoring URLs</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#1-submitting-url-for-scoring" class="toc-h2 toc-link" data-title="1. Submitting URL for scoring">1. Submitting URL for scoring</a>
                  </li>
                  <li>
                    <a href="#2-fetching-the-scores" class="toc-h2 toc-link" data-title="2. Fetching the scores">2. Fetching the scores</a>
                  </li>
                  <li>
                    <a href="#submit-an-url-for-scoring" class="toc-h2 toc-link" data-title="Submit an URL for scoring">Submit an URL for scoring</a>
                  </li>
                  <li>
                    <a href="#fetch-the-scores-of-a-url" class="toc-h2 toc-link" data-title="Fetch the scores of a URL">Fetch the scores of a URL</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#scoring-domains" class="toc-h1 toc-link" data-title="Scoring domains">Scoring domains</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#1-submitting-domains-for-scoring" class="toc-h2 toc-link" data-title="1. Submitting domains for scoring">1. Submitting domains for scoring</a>
                  </li>
                  <li>
                    <a href="#2-fetching-the-scores-2" class="toc-h2 toc-link" data-title="2. Fetching the scores">2. Fetching the scores</a>
                  </li>
                  <li>
                    <a href="#submit-domains-for-scoring" class="toc-h2 toc-link" data-title="Submit domains for scoring">Submit domains for scoring</a>
                  </li>
                  <li>
                    <a href="#fetch-the-scores-for-domains" class="toc-h2 toc-link" data-title="Fetch the scores for domains">Fetch the scores for domains</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='#'>Sign Up for a Developer Key</a></li>
            <li><a href='https://github.com/lord/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>-- Introduction --</p>

<p>Welcome to the Factmata API!</p>
<h1 id='authorization'>Authorization</h1>
<p>Factmata API is authorized using API Key. If you don&#39;t have a key please contact info@factmata.com to get one set up.</p>

<p>The API_KEY is accepted as a request header <code>x-api-key</code>.</p>

<p>Do not share you API Key in publicly accessible platforms.</p>
<h1 id='scoring-urls'>Scoring URLs</h1>
<p>Scoring URLs using Factmata API works in two steps:</p>
<h2 id='1-submitting-url-for-scoring'>1. Submitting URL for scoring</h2>
<p>Before a URL can be scored, it needs to be scraped, and then scored by our models.
    And hence the URL needs to be submitted first.</p>
<h2 id='2-fetching-the-scores'>2. Fetching the scores</h2>
<p>After the URL has been submitted, the results will be available in some time.</p>

<p>URL Scoring is complete when it has been scored by all models.</p>

<p>During the time between submission and fetching, URL might already have 
    been scored by some models, while some are still are processing. In this case,
    the user has the option to fetch the partial scores.</p>
<h2 id='submit-an-url-for-scoring'>Submit an URL for scoring</h2>
<p>To score a URL, it first needs to be submitted.</p>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://t7zcyk5xx0.execute-api.eu-west-1.amazonaws.com/production/api/v0.1/score/url"</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'url'</span><span class="p">:</span> <span class="s">'www.example.com/some-page'</span>
<span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'x-api-key'</span><span class="p">:</span> <span class="n">API_KEY</span>
<span class="p">}</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://t7zcyk5xx0.execute-api.eu-west-1.amazonaws.com/production/api/v0.1/score/url?url=https://example.com/page'</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"x-api-key: API_KEY"</span> 
</code></pre>
<blockquote>
<p>When the URL is successfully submitted for processing, the following response is returned</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">STATUS</span><span class="p">:</span><span class="w"> </span><span class="mi">202</span><span class="w">
</span></code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="s2">"answer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Request Sent Successfully"</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>If the URL is already being processed, the following response is returned</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">STATUS</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="w">
</span></code></pre><pre class="highlight plaintext"><code>{ "answer": "URL is being processed" }
</code></pre><h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://t7zcyk5xx0.execute-api.eu-west-1.amazonaws.com/production/api/v0.1/score/url/?url=www.example.com/some-page</code></p>
<h3 id='request-payload'>Request Payload</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>url</td>
<td>A valid URL string. This parameter is <code>required</code>. In case the URL is malformed or absent, request is aborted with status <code>422</code>. If the URL has already been submitted for scoring, status <code>200</code> is returned.</td>
</tr>
</tbody></table>

<aside class="notice">
URL once submitted once, does not need to be submitted again
</aside>

<aside class="notice">
Currently only English web-pages are scored.
</aside>

<aside class="warning">
URL must contain a path along with the domain/subdomain name. 
</aside>
<h2 id='fetch-the-scores-of-a-url'>Fetch the scores of a URL</h2>
<p>After a URL has been submitted for scoring, you can fetch the scores
using this API.</p>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://t7zcyk5xx0.execute-api.eu-west-1.amazonaws.com/production/api/v0.1/score/url/"</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'url'</span><span class="p">:</span> <span class="s">'www.example.com/some-page'</span>
<span class="p">}</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'x-api-key'</span><span class="p">:</span> <span class="n">API_KEY</span>
<span class="p">}</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://t7zcyk5xx0.execute-api.eu-west-1.amazonaws.com/production/api/v0.1/score/url?url=https://example.com/page'</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"x-api-key: API_KEY"</span> 
</code></pre>
<blockquote>
<p>If the URL has finished processing, the JSON structured like this is returned:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"models_scores"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"model"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.314</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"model"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.314</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="err">...</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"combined_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1414</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>If <code>partial_results</code> flag is set and the URL is still processing, the following response is returned</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"models_scores"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"model"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.314</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="err">##</span><span class="w"> </span><span class="err">At</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">stage</span><span class="w"> </span><span class="err">only</span><span class="w"> </span><span class="err">model</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">has</span><span class="w"> </span><span class="err">finished</span><span class="w"> </span><span class="err">processing</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>If the <code>partial_results</code> flag is not set and the URL is still processing, the following response is returned </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">STATUS</span><span class="p">:</span><span class="w"> </span><span class="mi">202</span><span class="w">
</span></code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"answer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Please try again later"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET https://t7zcyk5xx0.execute-api.eu-west-1.amazonaws.com/production/api/v0.1/score/url/?url=www.example.com/some-page&amp;partial_results=False</code></p>

<p>Fetching the scores has the following use cases:</p>
<h3 id='url-is-fully-processed'>URL is fully processed</h3>
<p>When the URL is fully processed, all the model scores, as well as the <code>combined score</code> are returned.</p>
<h3 id='url-is-partially-processed-partial_results-is-true'>URL is partially processed, <code>partial_results</code> is True</h3>
<p>The case when GET request is made, but only some models have finished scoring the URL, the user can fetch the scores of the <code>finished</code> models using the <code>partial_results</code> query parameter.
When <code>partial_results</code> is set to <code>True</code>, scores from models that have finished processing are returned.</p>
<h3 id='url-is-partially-processed-partial_results-is-false'>URL is partially processed, <code>partial_results</code> is False</h3>
<p>In this case, no scores are returned, and the API returns status code <code>202</code></p>
<h3 id='url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>url</td>
<td>None</td>
<td>A valid URL string. This parameter is <code>required</code>. In case the URL is malformed or absent, request is aborted with status <code>422</code>. If the URL has already been submitted for scoring, status <code>200</code> is returned.</td>
</tr>
<tr>
<td>partial_results</td>
<td>False</td>
<td>Optional Boolean flag if partial results are wanted</td>
</tr>
</tbody></table>
<h1 id='scoring-domains'>Scoring domains</h1>
<p>Scoring domains using Factmata API works in two steps:</p>
<h2 id='1-submitting-domains-for-scoring'>1. Submitting domains for scoring</h2>
<p>Before domains can be scored, they need to be crawled, and the crawled urls need to be
    scraped, and then the urls are scored by our models. Hence, the domains 
    need to be submitted first.</p>
<h2 id='2-fetching-the-scores-2'>2. Fetching the scores</h2>
<p>After the domains have been submitted, the results will be available in some time.</p>

<p>Domain Scoring is complete when all of the urls have been scored by all models.</p>

<p>During the time between submission and fetching, some domains might already have 
    been scored, while other are still processing. In this case,
    the user has the option to fetch the partial scores.</p>
<h2 id='submit-domains-for-scoring'>Submit domains for scoring</h2>
<p>To score domains, they first needs to be submitted.</p>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://t7zcyk5xx0.execute-api.eu-west-1.amazonaws.com/production/api/v0.1/score/domain"</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'domain'</span><span class="p">:</span> <span class="p">[</span>
    <span class="s">'www.example.com'</span><span class="p">,</span>
    <span class="s">'example.com'</span><span class="p">,</span>
  <span class="p">],</span>
  <span class="s">'threshold'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
  <span class="s">'crawl_number'</span><span class="p">:</span> <span class="mi">100</span>
<span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'x-api-key'</span><span class="p">:</span> <span class="n">API_KEY</span>
<span class="p">}</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://t7zcyk5xx0.execute-api.eu-west-1.amazonaws.com/production/api/v0.1/score/domain'</span> <span class="se">\</span>
  --data <span class="s1">'{"domain": ["www.example.com", "example.com"], "threshold": 5, "crawl_number": 100}'</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"x-api-key: API_KEY"</span> 
</code></pre>
<blockquote>
<p>When the domains are successfully submitted for processing, the following response is returned</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">STATUS</span><span class="p">:</span><span class="w"> </span><span class="mi">202</span><span class="w">
</span></code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="s2">"answer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"request sent successfully, added 2 domains: example.com, www.example.com"</span><span class="p">}</span><span class="w">

</span></code></pre>
<blockquote>
<p>If the domains are already being processed, the following response is returned</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">STATUS</span><span class="p">:</span><span class="w"> </span><span class="mi">406</span><span class="w">
</span></code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="s2">"answer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"domains are already processing"</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>If the domains are already successfully processed, the following response is returned</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">STATUS</span><span class="p">:</span><span class="w"> </span><span class="mi">406</span><span class="w">
</span></code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="s2">"answer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"These domains are successfully processed, send GET"</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-request-3'>HTTP Request</h3>
<p>`POST https://t7zcyk5xx0.execute-api.eu-west-1.amazonaws.com/production/api/v0.1/score/domain/</p>
<h3 id='request-payload-2'>Request Payload</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>domain</td>
<td>True</td>
<td>None</td>
<td>A valid domain string. In case any of the domains is malformed, request is aborted with status <code>422</code>. If all of the domains are already successfully processed in the last 90 days, status <code>406</code> is returned. If all of the domains are already processing, status <code>406</code> is returned.</td>
</tr>
<tr>
<td>threshold</td>
<td>False</td>
<td>5</td>
<td>The minimum number of crawled urls for the domains.</td>
</tr>
<tr>
<td>crawl_number</td>
<td>False</td>
<td>100</td>
<td>The desired number of crawled urls for the domains.</td>
</tr>
<tr>
<td>report</td>
<td>False</td>
<td>False</td>
<td>Flag to treat the endpoint as the GET endpoint (in order to send domains in body and not in a query string).</td>
</tr>
</tbody></table>

<aside class="notice">
Only new domains will be submitted from the domain list.
</aside>

<aside class="notice">
Domain is submitted once per 90 days, does not need to be submitted again in this period.
</aside>

<aside class="notice">
Currently only English web-pages are scored.
</aside>

<aside class="notice">
In case of a very big list of domains (100+), 504 status can be returned. 
It does not mean that the request failed.
</aside>

<aside class="warning">
A domain must not contain a protocol (http, https) or a subroute (example.com/page/1). 
</aside>
<h2 id='fetch-the-scores-for-domains'>Fetch the scores for domains</h2>
<p>After domains have been submitted for scoring, you can fetch the scores.
using this API.</p>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://t7zcyk5xx0.execute-api.eu-west-1.amazonaws.com/production/api/v0.1/score/domain/"</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'domain'</span><span class="p">:</span> <span class="p">[</span>
    <span class="s">'www.example.com'</span><span class="p">,</span>
    <span class="s">'example.com'</span><span class="p">,</span>
  <span class="p">],</span>
<span class="p">}</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'x-api-key'</span><span class="p">:</span> <span class="n">API_KEY</span>
<span class="p">}</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://t7zcyk5xx0.execute-api.eu-west-1.amazonaws.com/production/api/v0.1/score/domain/?domains="www.example.com"&amp;domain="example.com"'</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"x-api-key: API_KEY"</span> 
</code></pre>
<blockquote>
<p>or you can use post with report flag for large amount of domains (not to hit query length limits)</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://t7zcyk5xx0.execute-api.eu-west-1.amazonaws.com/production/api/v0.1/score/domain/"</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'domain'</span><span class="p">:</span> <span class="p">[</span>
    <span class="s">'www.example.com'</span><span class="p">,</span>
    <span class="s">'example.com'</span><span class="p">,</span>
  <span class="p">],</span>
  <span class="s">'report'</span><span class="p">:</span> <span class="bp">True</span>
<span class="p">}</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'x-api-key'</span><span class="p">:</span> <span class="n">API_KEY</span>
<span class="p">}</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://t7zcyk5xx0.execute-api.eu-west-1.amazonaws.com/production/api/v0.1/score/domain/'</span> <span class="se">\</span>
  --data <span class="s1">'{"domain": ["www.example.com", "example.com"], "report": true}'</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"x-api-key: API_KEY"</span> 
</code></pre>
<blockquote>
<p>If the domain has finished processing, the JSON structured like this is returned:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"domain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.com"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"7"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.22960291996598214</span><span class="p">,</span><span class="w">
    </span><span class="s2">"8"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.15365486010909035</span><span class="p">,</span><span class="w"> 
     </span><span class="err">...</span><span class="w"> 
    </span><span class="s2">"URLs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"https://example.com/feed/"</span><span class="p">,</span><span class="w"> </span><span class="s2">"https://example.com/about/"</span><span class="p">,</span><span class="w"> </span><span class="err">...</span><span class="p">],</span><span class="w">
    </span><span class="s2">"Example URL"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/feed/"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"Domain Score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.09033065447428551</span><span class="w">
  </span><span class="p">},</span><span class="w"> 
  </span><span class="s2">"dt_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-12-11T14:38:35.246635+00:00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"dt_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-12-14T07:30:08.748324+00:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>If a domain is still processing, the following response is returned</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
   </span><span class="s2">"domain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.com"</span><span class="p">,</span><span class="w"> 
   </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"progress"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"dt_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-12-19T09:42:11.110089+00:00"</span><span class="p">,</span><span class="w"> 
   </span><span class="s2">"dt_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-12-19T09:42:11.110094+00:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>If a domain is absent, the following response is returned</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
   </span><span class="s2">"domain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.com"</span><span class="p">,</span><span class="w"> 
   </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"absent"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>If a domain finished with an error, the following response is returned</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"domain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.com"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Error message"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"dt_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-04T13:24:12.213925+00:00"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"dt_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-05T00:45:06.583050+00:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-request-4'>HTTP Request</h3>
<p><code>GET https://t7zcyk5xx0.execute-api.eu-west-1.amazonaws.com/production/api/v0.1/score/domain/?domains=&quot;www.example.com&quot;&amp;domain=&quot;example.com&quot;</code></p>

<p>Fetching the scores has the following use cases:</p>
<h3 id='domain-is-successfully-processed'>Domain is successfully processed</h3>
<p>Status <code>success</code> and <code>score</code> with model scores are returned.</p>
<h3 id='domain-is-processed-with-an-error'>Domain is processed with an error</h3>
<p>Status <code>error</code> and <code>score</code> containing the error message are returned.</p>
<h3 id='domain-is-still-processing'>Domain is still processing</h3>
<p>Status <code>progress</code> is returned.</p>
<h3 id='domain-is-absent'>Domain is absent</h3>
<p>Status <code>absent</code> is returned.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>domain</td>
<td>None</td>
<td>True</td>
<td>A valid domain string. In case ant of the domains are malformed, request is aborted with status <code>422</code>.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="python">python</a>
          </div>
      </div>
    </div>
  </body>
</html>
